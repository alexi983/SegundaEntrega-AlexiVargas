---
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
---

<Header />

<section class="py-16 px-4 md:px-20 flex flex-col items-center text-gray-800">
  <h1 class="text-3xl md:text-5xl font-bold mb-10 text-center">Intranet</h1>
  <p class="text-center text-gray-600 mb-10">Ingrese sus datos por favor</p>

  <form id="loginForm" class="bg-white shadow-lg rounded-lg p-8 w-full max-w-md space-y-6">
    <div>
      <label for="rut" class="block text-sm font-medium text-gray-700 mb-2">R.U.T.:</label>
      <input
        type="text"
        id="rut"
        name="rut"
        placeholder="EJ: 12345678-9"
        class="w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-800 focus:outline-none"
      />
    </div>
    <div>
      <label for="clave" class="block text-sm font-medium text-gray-700 mb-2">Clave:</label>
      <input
        type="password"
        id="clave"
        name="clave"
        placeholder="Ingrese su clave"
        class="w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-800 focus:outline-none"
      />
    </div>
    <div class="flex flex-col items-center space-y-6 pt-4">
      <button type="submit" class="bg-orange-500 text-white font-semibold px-10 py-2 rounded hover:bg-orange-600 w-1/2">
        Ingresar
      </button>
      <div class="flex justify-center space-x-8">
        <button type="button" id="btn-registrar" class="text-blue-800 hover:underline font-medium">Registrar</button>
        <button type="button" id="btn-cambiar" class="text-blue-800 hover:underline font-medium">Cambiar clave</button>
        <button type="button" id="btn-olvido" class="text-blue-800 hover:underline font-medium">Olvido clave</button>
      </div>
    </div>
  </form>
  <p id="mensaje" class="text-center text-red-600 font-medium mt-4 hidden"></p>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("loginForm");
    const mensaje = document.getElementById("mensaje");
    const btnRegistrar = document.getElementById("btn-registrar");
    const btnCambiar = document.getElementById("btn-cambiar");
    const btnOlvido = document.getElementById("btn-olvido");
    const btnVolver = document.getElementById("btn-volver");
    if (!form || !mensaje) return;
    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const rutInput = document.querySelector("#rut");
      const claveInput = document.querySelector("#clave");
      let rut = "";
      let clave = "";
      if (rutInput && rutInput instanceof HTMLInputElement) {
        rut = rutInput.value.trim();
      }
      if (claveInput && claveInput instanceof HTMLInputElement) {
        clave = claveInput.value.trim();
      }
      if (rut === "" || clave === "") {
        mensaje.textContent = "Debe ingresar su RUT y Clave para continuar.";
        mensaje.classList.remove("hidden", "text-green-600");
        mensaje.classList.add("text-red-600");
      } else {
        mensaje.textContent = "Simulando ingreso al sistema...";
        mensaje.classList.remove("hidden", "text-red-600");
        mensaje.classList.add("text-green-600");
        setTimeout(function () {
          mensaje.textContent = "";
          mensaje.classList.add("hidden");
        }, 2000);
      }
    });

    if (btnRegistrar)
      btnRegistrar.addEventListener("click", function () {
        window.location.href = "/identificacion/registrar";
      });

    if (btnCambiar)
      btnCambiar.addEventListener("click", function () {
        window.location.href = "/identificacion/cambiar-clave";
      });

    if (btnOlvido)
      btnOlvido.addEventListener("click", function () {
        window.location.href = "/identificacion/olvido-clave";
      });

    if (btnVolver)
      btnVolver.addEventListener("click", function () {
        window.history.back();
      });
  });
</script>

<Footer />